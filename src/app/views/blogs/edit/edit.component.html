<div *ngIf="loader" style="position: absolute;top:45%;right:40%;z-index:9">
    <mat-spinner diameter="50"></mat-spinner>
  </div>
  <div [formGroup]="editForm">
    <c-row class="m-l-2 ctn-breadcrumb">
      <c-col md="6" xl="6" sm="6" xs="6" class="m-l-0 p-l-0">
        <div class="d-flex align-center">
          <span class="f-s-13 light-fnt3 f-sans f-w-600 c-pointer"><img src="assets/icons/home.png" width="17px" height="17px"
              alt=""></span>
          <div class="d-flex align-center p-t-6 m-l-10"><mat-icon
              class="light-fnt6 f-s-20">keyboard_arrow_right</mat-icon>
          </div>
          <div class="d-flex align-center p-t-6 m-l-10"><mat-icon class="light-fnt6 f-s-20">more_horiz</mat-icon>
          </div>
          <span [routerLink]="'/blogs'" class="m-l-10 f-s-13 c-gr-light f-inter fw-semibold d-flex align-center m-t-2 c-pointer">Blogs</span>
          <div class="d-flex align-center p-t-6 m-l-10"><mat-icon
              class="light-fnt6 f-s-20">keyboard_arrow_right</mat-icon>
          </div>
          <span class="m-l-10 f-s-14 c-primary f-roboto f-w-600 d-flex align-center m-t-2  ">Update</span>
        </div>
      </c-col>
      <c-col md="6" xl="6" sm="6" xs="6">
      </c-col>
    </c-row>
    <c-row ngPreserveWhitespaces style="min-height:75vh!important;">
      <div class=" action-items3 p-0 m-b-10 m-t-10">
        <div class="d-flex align-center j-space p-2 m-b-15">
          <div class="    d-flex  align-center f-inter">
            <span class="fw-semibold f-s-24 f-heebo m-t-5">Update Blog</span>
          </div>
          <div class="d-flex align-center menu-items">
            <div class="f-roboto fw-semibold d-flex align-center">
              <span class="m-r-10 f-s-13 f-sintika">Publish On</span>
              <div (click)="publishDate?.showPicker()" class="add-blog3 f-roboto m-r-20 p-10  fw-semibold c-pointer">
                <input type="date" #publishDate style="padding-left: 2px;visibility: hidden;width: 1px!important;"
                  placeholder="Date" [max]="getToday()" formControlName="publishingDate" id="publishingDate" name="publishingDate">
                <mat-icon class="f-s-20 m-t-2">history_toggle_off</mat-icon>
                <div class="f-s-13">{{editForm?.controls?.publishingDate?.value ? (editForm?.controls?.publishingDate?.value |
                  date:'YYYY-MM-dd') : 'Select Date'}}</div>
                <mat-icon class="f-s-20 m-t-4 m-l-5">expand_more</mat-icon>
              </div>
  
            </div>
            <div class="no-close f-roboto fw-semibold d-flex align-center  sts-filter">
              <span class="no-close m-r-10 f-s-13 f-sintika">Status</span>
              <div [matMenuTriggerFor]="statusmenu" class=" no-close add-blog3 f-roboto m-r-20 p-5  fw-semibold c-pointer">
                <mat-icon class="no-close f-s-20 m-t-2">published_with_changes</mat-icon>
                <div class="no-close grid-item j-space p-relative">
                  <span class="no-close m-r-5">{{selectedStatusType?.name}}</span> <span><i
                      class="no-close fa fa-chevron-down f-s-12 p-r-5 c-gr f-w-400"></i></span>
                  <mat-menu #statusmenu="matMenu">
                    <div mat-menu-item *ngFor="let item of statusList"
                      [ngClass]="{'selected-item' :selectedStatusType == item }" (click)="onOptionSelected(item,$event)">
                      {{item?.name}}</div>
                  </mat-menu>
                </div>
              </div>
            </div>
            <div class="no-close f-roboto fw-semibold d-flex align-center  sts-filter">
              <span class="no-close m-r-10 f-s-13 f-sintika">Company</span>
              <div [matMenuTriggerFor]="domainmenu" class=" no-close add-blog3 f-roboto m-r-20 p-5  fw-semibold c-pointer">
                <mat-icon class="no-close f-s-20 m-t-2">domain</mat-icon>
                <div class="no-close grid-item j-space p-relative">
                  <span class="no-close m-r-5">{{selectedDomain}}</span> <span><i
                      class="no-close fa fa-chevron-down f-s-12 p-r-5 c-gr f-w-400"></i></span>
                  <mat-menu #domainmenu="matMenu">
                    <div mat-menu-item *ngFor="let item of domainList"
                      [ngClass]="{'selected-item' :selectedDomain == item }" (click)="onOptionSelectedCompany(item)">
                      {{item}}</div>
                  </mat-menu>
                </div>
              </div>
  
            </div>
  
            <div (click)="updateBlog(editForm?.value)" class="add-blog2 f-roboto m-r-20 p-10  fw-semibold c-pointer">
              <mat-icon class="f-s-20 m-t-2">post_add</mat-icon>
              Update
            </div>
            <button (click)="cancel()" mat-icon-button class="remove-blog2 p-4">
              <mat-icon class="f-s-20 m-t-5">close</mat-icon>
            </button>
          </div>
  
        </div>
      </div>
      <c-col md="3"  style="background-color: rgb(247, 248, 249);border-radius: 8px;">
        <div>
          <div class="p-relative p-15">
            <div>
              <div style="color:rgb(46, 59, 107)!important"
                class="f-s-17 p-10 p-l-0  d-flex align-center f-heebo fw-bold">
                <mat-icon class="f-s-17" style="line-height: 20px;">widgets</mat-icon> Workspace
              </div>
            </div>
            <div class="tab-btns m-t-0  sub m-l-5 p-relative" [ngClass]="checkBasicDetailsFilled() ? 'active' : ''">
              <h6 class="text-overflow-ellipsis f-s-14 f-w-600 f-heebo p-l-15 p-t-20 p-b-20 p-10 m-0 ">
                <div class="stepper-icon">
                  <mat-icon class="f-s-17" [ngClass]="checkBasicDetailsFilled() ? 'active' : ''" >{{checkBasicDetailsFilled() ? 'check_circle' : 'mode_standby'}}</mat-icon>
                </div>
                Basic Details
              </h6>
            </div>
            <div class="tab-btns m-t-0  sub m-l-5 p-relative p-t-0 m-t-0" [ngClass]="checkContentFilled()  ? 'active' : ''">
              <h6 class="text-overflow-ellipsis f-s-14 f-w-600 f-heebo p-l-15 p-t-20 p-b-20 p-10 m-0 ">
                <div class="stepper-icon">
                  <mat-icon class="f-s-17" [ngClass]="checkContentFilled() ? 'active' : ''" >{{checkContentFilled() ? 'check_circle' : 'mode_standby'}}</mat-icon>
                </div>
                Content
              </h6>
            </div>
            <div class="tab-btns m-t-0  sub m-l-5 p-relative p-t-0 m-t-0" [ngClass]="checkPublishingInfoFilled() ? 'active' : ''">
              <h6 class="text-overflow-ellipsis f-s-14 f-w-600 f-heebo p-l-15 p-t-25 p-b-30 p-10 m-0 ">
                <div class="stepper-icon">
                  <mat-icon class="f-s-17" [ngClass]="checkPublishingInfoFilled() ? 'active' : ''" >{{checkPublishingInfoFilled() ? 'check_circle' : 'mode_standby'}}</mat-icon>
                </div>
                Publish Details
              </h6>
            </div>
            <div class="tab-btns  d-flex align-center m-b-30 sub m-l-5  sub-last" [ngClass]="checkBasicDetailsFilled() && checkContentFilled() && checkPublishingInfoFilled() ? 'done' : ''">
              <h6 class="f-s-15 f-w-600 f-heebo p-l-14 p-20 p-t-20 p-b-0 m-0 last-sub">
                <div class="stepper-icon2">
                  <mat-icon class="f-s-18" [ngClass]="checkBasicDetailsFilled() && checkContentFilled() && checkPublishingInfoFilled() ? 'done' : ''">{{checkBasicDetailsFilled() && checkContentFilled() && checkPublishingInfoFilled() ? 'check_circle' : 'cancel'}}</mat-icon>
                </div>
                Ready to Update</h6>
            </div>
          </div>
        </div>
        <div *ngIf="blogDetails?.coverImageUrl" class="p-10">
          <h6 class="f-s-14 f-w-600 f-heebo">Image Preview</h6>
          <img [src]="blogDetails?.coverImageUrl" width="95%" height="150px" alt="" srcset="">
        </div>
        <div class="m-t-30 p-10">
          <h6 class="f-sintika f-w-600 f-s-16">Recent Blogs</h6>
        <div class=" m-b-10  ">
          <div  class="d-flex p-relative flex-column dark-bg-box-edit m-b-10  p-15 " *ngFor="let blog of latestBlogs">
            <div class="d-flex j-space">
              <h5 style="width:calc(80% - 5px)!important;overflow: hidden;" class=" text-overflow-ellipsis f-heebo f-w-500 f-s-14 m-0 ">{{blog?.title}}</h5>
              <small  style="width:20%;position: absolute;top:1px;right:5px;color:rgb(36, 36, 45)" class="d-flex align-center f-heebo f-w-500 f-s-11  p-l-5 p-b-10 p-t-10">{{blog?.publishingDate | date:"dd MMM"}}</small>
            </div>
            <p style="width:calc(98% - 5px)!important;overflow: hidden;" class="f-s-13 f-w-400">{{blog?.preview}}</p>
  
            <div class="d-flex j-space">
              <h5 style="width:calc(80% - 5px)!important;overflow: hidden;" class="btn text-overflow-ellipsis f-heebo f-w-500 f-s-14 m-0  ">{{blog?.category}}</h5>
              <small  style="width:20%;" class="d-flex align-center f-heebo f-w-500  f-s-14  p-l-10 p-b-10 p-t-10"></small>
            </div>
          </div>
        </div>
        </div>
      </c-col>
      <c-col md="9">
        <div class="m-b-10">
          <c-row class="p-relative" style="position: relative;">
            <c-col md="12" xl="12" sm="12" xs="12" class="  p-t-0 p-b-15 ">
              <div class="flex-column ">
                <div class=" d-flex j-space p-4 align-center  f-s-14 f-w-600 p-2 p-l-15 p-r-15 m-b-20  dark-bg-box2"
                  style="border-top-right-radius:12px;border-bottom-right-radius:12px;color:rgb(39, 38, 53);width: calc(100% + 24px);margin-left: -15px;">
                  <div class="f-s-16 f-roboto f-w-600  ">Basic Details</div>
                  <div class=" d-flex align-center j-end">
                    <button mat-icon-button (click)="toggleBasicDetails()"><mat-icon>{{animationState=='in'? 'unfold_less' : 'unfold_more'}}</mat-icon> </button>
                    <button mat-icon-button (click)="resetBasicDetails()"><mat-icon>refresh</mat-icon></button>
                  </div>
                </div>
                <div [@slideInOut]="animationState" class="divA">
                  <c-row>
                    <c-col [md]="isexpandTitle ? '12' : '6'">
                      <div class="p-5 p-l-0 p-r-2  heading-labels f-s-13 f-w-600 f-roboto">
                        <div class="d-flex gap-2">
                          <span class="f-w-500">Blog Title</span>
                          <div class="fw-semibold   d-flex align-center  required-btn">REQUIRED</div>
                         </div>
                        <div class="d-flex align-center">
                          <div class="f-w-500 f-roboto f-s-13  d-flex align-center m-r-15"><mat-icon class="p-0 f-s-18"
                              style="height: 24px!important;line-height: 24px;">close</mat-icon></div>
                          <div class="f-w-500 f-s-13 f-roboto d-flex align-center" (click)="expandToggleTitle()"><mat-icon
                              class="p-0 f-s-18"
                              style="height: 24px!important;width:14px!important;line-height: 24px;">{{isexpandTitle ?
                              'chevron_left' : 'chevron_right'}}</mat-icon>
                          </div>
                        </div>
                      </div>
                      <c-input-group class="mb-2 f-s-12">
                        <input autoComplete="title" formControlName="title" cFormControl
                          placeholder="Enter title for your blog..."
                          class="f-s-14 p-l-5 p-r-5 p-10  t-a-left  p-relative " />
                          <span  *ngIf="!editForm?.controls?.title?.value && !loader" class="missing" >Please enter the title</span>
                      </c-input-group>
                    </c-col>
                    <c-col [md]="isexpandTitle ? '12' : '6'">
                      <div class="p-5 p-l-0 p-r-5 f-w-600 m-b-1 heading-labels">
                        <div class="d-flex gap-2">
                          <span class="f-w-500">Meta Title</span>
                          <div class="fw-semibold   d-flex align-center  required-btn">REQUIRED</div>
                         </div>
                      </div>
                      <c-input-group class="f-s-12">
                        <input autoComplete="metaTitle" formControlName="metaTitle" cFormControl
                          placeholder="Please do fill in Meta Title. eg: The impact of AI in day-to-day life."
                          class="f-s-14 f-w-500 p-l-5 p-r-5 p-relative" />
                          <span  *ngIf="!editForm?.controls?.metaTitle?.value && !loader" class="missing" >Please enter the meta title</span>
    
                      </c-input-group>
                    </c-col>
                  </c-row>
    
                  <c-row>
                    <c-col md="12">
                      <div class="p-5 p-l-0 p-r-5 f-w-500  heading-labels">
                        <div class="d-flex gap-2">
                          <span class="f-w-500">Meta Description</span>
                          <div class="fw-semibold   d-flex align-center  required-btn">REQUIRED</div>
                         </div>
                      </div>
                      <c-input-group class="mb-2 f-s-12">
                        <textarea autoComplete="metaDescription" formControlName="metaDescription" cFormControl
                          placeholder="Describe about your blog" name="Text1" class="f-s-14 f-w-500 p-l-5 p-r-5 desc p-relative"
                          cols="40" rows="5"></textarea>
                          <span  *ngIf="!editForm?.controls?.metaDescription?.value  && !loader" class="missing" >Please enter the meta description</span>
                      </c-input-group>
                    </c-col>
                    <!-- <c-col md="6">
                      <div class="p-5 p-l-0 p-r-5 f-w-500  heading-labels">Preview</div>
                      <c-input-group class="mb-2 f-s-12">
                        <textarea autoComplete="preview" formControlName="preview" cFormControl
                          placeholder="Provide first few lines of your Blog for preview"
                          class="f-s-14 f-w-500 p-l-5 p-r-5 desc p-relative" cols="40" rows="5"></textarea>
                          <span  *ngIf="!editForm?.controls?.preview?.value && !loader" class="missing" >Please fill in the preview for your blog</span>
                      </c-input-group>
                    </c-col> -->
    
                  </c-row>
    
                  <c-row>
                    <c-col md="6">
                      <div class="p-5 p-l-0 p-r-5  heading-labels "><div><span class="f-w-500">Category</span> <span class="m-l-4 f-s-13 f-w-400" style="font-weight: 400!important;">(Optional)</span></div></div>
                      <c-input-group class="mb-2 f-s-12">
                        <input formControlName="category" cFormControl placeholder="What is the category for your Blog ?"
                          class="f-s-14 f-w-500 p-l-10 p-r-5 p-relative" />
                      </c-input-group>
                    </c-col>
                    <c-col md="6">
                      <div class="p-5 p-l-0 p-r-5  heading-labels f-w-500">
                        <div class="d-flex gap-2">
                          <span class="f-w-500">Link Url</span>
                          <div class="fw-semibold   d-flex align-center  required-btn">REQUIRED</div>
                         </div>
                      </div>
                      <c-input-group class="mb-2 f-s-12">
                        <input formControlName="blogUrl" cFormControl placeholder="URL to your content source"
                          class="f-s-14 f-w-500 p-l-5 p-r-5 p-relative" />
                          <span  *ngIf="!editForm?.controls?.blogUrl?.value  && !loader" class="missing" >Please enter the URL to your blog</span>
    
                      </c-input-group>
                    </c-col>
    
                  </c-row>
    
                  <c-row>
                    <c-col md="6"><ng-container>
                        <h5 class="f-s-15 heading-labels">
                          <div class="d-flex gap-2">
                            <span class="f-w-500">Tags</span>
                            <div class="fw-semibold   d-flex align-center  required-btn">REQUIRED</div>
                           </div>
                        </h5>
                        <div>
                          <c-input-group class="mb-2 f-s-12 p-l-0 p-r-0">
                            <input class="p-5 chp-input f-s-14" cFormControl placeholder="Add a new tag"
                              [matChipInputFor]="chipTagGrid" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                              [matChipInputAddOnBlur]="addOnBlur" (matChipInputTokenEnd)="add($event)" />
                              <span  *ngIf="this.tags?.length==0" class="missing" >Add Tags for your blog</span>
                          </c-input-group>
                          <div class="f-s-13 ">
                            <mat-chip-grid #chipTagGrid aria-label="Enter tags" class="chip-grid">
                              <mat-chip-row *ngFor="let item of tags" class="p-relative assigned-chip"
                                (removed)="remove(item)" [editable]="true" (edited)="edit(item, $event)">
                                <div class="chp-item">{{item}}</div>
                                <button class="f-s-16" matChipRemove [attr.aria-label]="'remove ' + item.tag">
                                  <mat-icon>cancel</mat-icon>
                                </button>
                              </mat-chip-row>
                            </mat-chip-grid>
                          </div>
                        </div>
                      </ng-container></c-col>
                      <c-col md="6">
                        <div class="p-5 p-l-0 p-r-5  heading-labels f-w-500 d-flex align-center j-space">
                          <div class="d-flex gap-2">
                            <span class="f-w-500">Cover Image</span>
                            <div class="fw-semibold   d-flex align-center  required-btn">REQUIRED</div>
                            <div class="fw-semibold   d-flex align-center  max-size-btn">MAX 800KB</div>
                           </div>
                          <div class="d-flex gap-2">
                            <mat-icon *ngIf="selectedFilePreview"  (click)="deleteImage($event)" class="c-pointer f-s-18 " style="color:rgba(204, 56, 56,0.79);line-height: 25px;">cancel</mat-icon>
                          </div>
                          </div>
                        <div class="upload-area flex-column d-flex align-center  j-center  p-relative p-t-15" (click)="image_upload.click()"
                        (drop)="fileDrop($event)" (dragover)="fileDrag($event)">
                            <img  [src]="selectedFilePreview ? selectedFilePreview : 'assets/icons/image.png'" width="20%" height="60%" alt="">
                            <div [matTooltip]="selectedFile?.name" style="max-width:180px;white-space: nowrap;text-overflow: ellipsis;overflow: hidden;" class="c-gr  f-s-12 f-roboto m-t-5">{{selectedFilePreview ? selectedFile?.name : ' Upload Image'}}</div>
                            <div *ngIf="!selectedFilePreview" class="missing2 p-l-0 f-s-10">Max 700kb</div>
                            <input  #image_upload type="file" style="display:none" (change)="onFileChanged($event)"
                            multiple />
                        </div>
                        <span  *ngIf="!selectedFilePreview" class="missing2 " >Please give the cover image for your blog</span>
                        <!-- <c-input-group class="mb-2 f-s-12">
                          <input autoComplete="coverImage" formControlName="coverImage" cFormControl placeholder="Cover Image"
                            class="f-s-14 f-w-500 p-l-5 p-r-5" />
                            <span  *ngIf="!form?.controls?.coverImage?.value && form?.controls?.coverImage?.touched" class="missing" >Please give the cover image URL for your blog</span>
                        </c-input-group> -->
                      </c-col>
                  </c-row>
                  <c-row>
                    <c-col md="6"></c-col>
                    <c-col md="6">
                      <ng-container>
                        <h5 class="f-s-15 p-l-5 heading-labels m-t-20">
                          <div class="d-flex gap-2">
                            <span class="f-w-500">Alternate Image Name</span>
                            <div class="fw-semibold   d-flex align-center  required-btn">REQUIRED</div>
                           </div>
                        </h5>
                        <c-input-group class="mb-2 f-s-12">
                          <input formControlName="alternateImageName" cFormControl placeholder="Alternate Image Name"
                            class="f-s-14 f-w-500 p-l-5 p-r-5 p-relative" />
                        </c-input-group>
                      </ng-container>
                    </c-col>
                  </c-row>
                </div>
                
              </div>
              <div class=" m-t-20 m-b-20 d-flex j-center">
                <hr style="width: 90%;color:rgb(45, 45, 69);height: 10px!important;">
              </div>
              <div class=" d-flex j-space p-4 align-center  f-s-14 f-w-600 p-2 p-l-15 p-r-15 m-b-20  dark-bg-box2"
                style="border-top-right-radius:12px;border-bottom-right-radius:12px;color:rgb(39, 38, 53);width: calc(100% + 24px);margin-left: -15px;">
                <div class="f-s-16 f-roboto f-w-600  p-t-10 p-b-10">Content Description</div>
                <div class=" d-flex align-center j-end">
                  <!-- <div class="d-flex align-center ">
                    <button class="btn p-2 p-l-5 p-r-5 m-r-10 f-s-14"
                      [ngClass]=" descriptionEditor ? 'active' : 'inactive'" (click)="sourceStatus()">
                      Visual
                    </button>
                    <button class="btn p-2 p-l-5 p-r-5 f-s-14" [ngClass]="source ? 'active' : 'inactive'"
                      (click)="sourceStatus()">
                      HTML Source
                    </button>
                  </div> -->
                  <!-- <button mat-icon-button><mat-icon>unfold_less</mat-icon> </button> -->
                </div>
              </div>
              <div class=" m-t-10">
                <span  *ngIf="!editForm?.controls?.content?.value && !loader" class="missing" >Please write content for your blog</span>
                <c-row *ngIf="descriptionEditor && !source" class="m-b-10">
                  <ckeditor [editor]="Editor" [config]="{ toolbar: [ 
                 'heading',
                 '|',
                 'bold',
                 'italic',
                 'underline',
                 'horizontalLine',
                 'link',
                 'bulletedList',
                 'code',
                 'codeBlock',
                 '|',
                 'classicEditor',
                 'numberedList',
                 'sourcedialog',
                 '|',
                 'outdent',
                 'indent',
                 'alignment',
                 '|',
                 'fontColor',
                 'fontSize',
                 'blockQuote',
                 'undo',
                 'redo',
                 'SourceEditing'
                 ] }" [(ngModel)]="blogContent" formControlName="content" #myEditor></ckeditor>
                </c-row>
                <pre *ngIf="source && descriptionEditor" readonly
                  class="txt-area html-source-editor">{{blogContent}}</pre>
              </div>
            </c-col>
          </c-row>
        </div>
      </c-col>
    </c-row>
  </div>